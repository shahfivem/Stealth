const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/WifiPassword-CmpuCC7r.js","assets/index-CUz47RG4.js","assets/index-DfsOhq5G.css","assets/index--4L0djX4.js","assets/index-z7JxnMWN.js","assets/index-PFMSMQwc.js","assets/index-JPxqv-Dt.js","assets/index-C4xZGX4t.js"])))=>i.map(i=>d[i]);
import{E as M,a5 as A,I as D,an as O,a6 as S,ao as v,a7 as j,o as l,c,a,v as r,N as s,n as x,a4 as y,x as f,l as B,F as E,A as W,t as $,ab as z,a8 as m,P as F,_ as U}from"./index-CUz47RG4.js";import{u as I}from"./connection.store-DtiKPjw5.js";import{s as h}from"./index-BNidIOmI.js";import{s as J}from"./index-B0fGYRp0.js";import"./index-C4xZGX4t.js";import"./index-PFMSMQwc.js";const R={class:"flex flex-1 flex-col items-center justify-start gap-5 overflow-auto"},q={class:"flex w-full items-center justify-between rounded-lg bg-gray-300 px-2 py-2 dark:bg-gray-800"},G={class:"flex w-2/3 flex-col"},H={class:"text-sm font-semibold text-color"},K={class:"break-words text-xs text-muted-color"},Q={key:0,class:"flex w-full items-center justify-between rounded-lg bg-gray-300 px-2 py-2 dark:bg-gray-800"},X={class:"flex w-2/3 flex-col"},Y={class:"text-sm font-semibold text-color"},Z={class:"break-words text-xs text-muted-color"},ee={key:1,class:"flex w-full flex-1 flex-col gap-2"},te={class:"flex w-full items-center justify-between text-sm font-semibold text-muted-color"},se={class:"w-full flex-1 overflow-auto rounded-lg bg-gray-300 dark:bg-gray-800"},oe={key:0,class:"py-4 text-center text-xs text-muted-color"},ne={key:1,class:"divide-y divide-gray-200/40 dark:divide-gray-700/40"},ie=["onClick"],ae={class:"flex items-center gap-5 text-sm"},le={class:"flex items-center gap-5 text-sm"},ce={key:0,class:"pi pi-lock"},de={key:1,class:"text-xs text-muted-color"},re={key:2,class:"pi pi-chevron-right text-xs"},we=M({__name:"WifiTab",props:{metadata:{},changeWindowTitle:{type:Function}},setup(b){const k=F(()=>U(()=>import("./WifiPassword-CmpuCC7r.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]))),V=b,e=A(),i=I(),_=D(),C=O(),u=z("network"),d=S(!1),p=async(n,o)=>{const{data:t}=await m("connectTo",{method:"POST",body:JSON.stringify({ssid:n,password:o})},void 0,{success:!0,error:void 0}),{success:w,error:N}=t.value;if(d.value=!1,!w)return u.emit("updated"),_.show({summary:e.t("settings_wifi_connection_error"),detail:N});i.markAsConnected(n),u.emit("updated"),_.show({summary:e.t("settings_wifi_connection_succ"),detail:`${e.t("settings_wifi_connected_to")}${n}`})},T=n=>{d.value=!0,C.open(k,{props:{header:e.t("settings_wifi_modal_title"),modal:!0},onClose:o=>{const{data:t}=o;d.value=!1,t&&p(n,t)}})},L=async n=>{if(d.value||i.airplaneMode)return;const o=i.networks.find(t=>t.ssid===n);if(o){if(o.connected)return g();if(o.password)return T(n);d.value=!0,p(n)}},g=async()=>{if(d.value)return;d.value=!0;const{data:n}=await m("disconnect",{method:"POST"},void 0,{success:!0,error:void 0}),{success:o,error:t}=n.value;d.value=!1,o||(u.emit("updated"),_.show({summary:e.t("settings_wifi_connection_error"),detail:t})),i.markAsDisconnected(),i.connectedToVpn=!1,u.emit("updated"),_.show({summary:e.t("settings_wifi_disconnect_succ"),detail:e.t("settings_wifi_disconnect_succ_detail")})},P=async n=>{const{data:o}=await m("toggleVpn",{method:"POST",body:JSON.stringify({status:n})},void 0,{success:!0,error:void 0}),{success:t}=o.value;if(!t){i.connectedToVpn=!1,u.emit("updated");return}u.emit("updated"),_.show({summary:"VPN connection",detail:n?e.t("settings_wifi_vpn_enabled"):e.t("settings_wifi_vpn_disabled")})};return v(()=>i.connectedToVpn,n=>{P(n)},{debounce:100}),v(()=>i.airplaneMode,n=>{if(u.emit("updated"),n)return g(),_.show({summary:e.t("settings_wifi_airplane_mode_enabled"),detail:e.t("settings_wifi_airplane_mode_enabled_detail")});_.show({summary:e.t("settings_wifi_airplane_mode_disabled"),detail:e.t("settings_wifi_airplane_mode_disabled_detail")})},{debounce:100}),j(()=>{V.changeWindowTitle(e.t("settings_wifi_title"))}),(n,o)=>(l(),c("div",R,[a("div",q,[a("div",G,[a("span",H,r(s(e).t("settings_wifi_airplane_mode")),1),a("span",K,r(s(e).t("settings_wifi_airplane_mode_description")),1)]),x(s(h),{class:"w-24",modelValue:s(i).airplaneMode,"onUpdate:modelValue":o[0]||(o[0]=t=>s(i).airplaneMode=t),onLabel:s(e).t("settings_wifi_airplane_mode_on"),offLabel:s(e).t("settings_wifi_airplane_mode_off"),size:"small"},null,8,["modelValue","onLabel","offLabel"])]),s(i).isConnected?(l(),c("div",Q,[a("div",X,[a("span",Y,r(s(e).t("settings_wifi_vpn_mode")),1),a("span",Z,r(s(e).t("settings_wifi_vpn_mode_description")),1)]),x(s(h),{class:"w-24",onClick:o[1]||(o[1]=y(()=>{},["prevent"])),modelValue:s(i).connectedToVpn,"onUpdate:modelValue":o[2]||(o[2]=t=>s(i).connectedToVpn=t),onLabel:s(e).t("settings_wifi_vpn_mode_on"),offLabel:s(e).t("settings_wifi_vpn_mode_off"),size:"small"},null,8,["modelValue","onLabel","offLabel"])])):f("",!0),s(i).airplaneMode?f("",!0):(l(),c("div",ee,[a("div",te,[a("span",null,r(s(e).t("settings_wifi_networks")),1),d.value?(l(),B(s(J),{key:0,style:{width:"1em",height:"1em",margin:"0"}})):f("",!0)]),a("div",se,[s(i).networks.length<1?(l(),c("div",oe,r(s(e).t("settings_wifi_no_networks")),1)):(l(),c("ul",ne,[(l(!0),c(E,null,W(s(i).networks,t=>(l(),c("li",{onClick:y(w=>L(t.ssid),["prevent"]),class:$(["flex items-center justify-between px-5 py-4 hover:cursor-pointer hover:bg-emphasis hover:text-color-emphasis",{"text-color-emphasis":t.connected,"text-muted-color":!t.connected}])},[a("div",ae,[o[3]||(o[3]=a("i",{class:"pi pi-wifi"},null,-1)),a("span",null,r(t.label),1)]),a("div",le,[t.password&&!t.connected?(l(),c("i",ce)):f("",!0),t.connected?(l(),c("span",de,r(s(e).t("settings_wifi_connected_title")),1)):(l(),c("i",re))])],10,ie))),256))]))])]))]))}});export{we as default};
