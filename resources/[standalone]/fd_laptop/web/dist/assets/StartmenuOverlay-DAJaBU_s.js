import{E as L,a6 as x,H as N,G as P,J as S,a5 as H,K as T,b as V,aT as F,o as n,c as a,a as t,N as l,l as y,a4 as u,F as h,A as w,n as I,x as R,v as C}from"./index-CUz47RG4.js";import{i as X}from"./url.utils-DFDgd6Sa.js";import{s as Y}from"./index-nkD-Q-3e.js";import{s as _}from"./index-CnvS1F-u.js";import"./index-kleVd9nI.js";import"./index-PFMSMQwc.js";import"./index-DJplfu5-.js";import"./index-z7JxnMWN.js";const j={class:"flex flex-col justify-between px-2 py-4"},q={class:"flex flex-col gap-2 hover:cursor-pointer"},G={class:"flex min-w-56 bg-gray-200/50 px-2 py-4 dark:bg-gray-900/50"},J={class:"flex w-full flex-col gap-3 overflow-y-auto scrollbar-thin scrollbar-track-rounded-[100px] scrollbar-thumb-rounded-[100px] scrollbar-corner-rounded-[100px] dark:scrollbar-track-gray-500/80 dark:scrollbar-thumb-gray-400/80"},K={class:"flex flex-col"},U={class:"mb-2 ml-5 text-xs"},z=["onClick","onContextmenu"],Q=["src","alt"],W={key:1,class:"pi pi-question w-4 text-xs"},Z={class:"text-sm"},ie=L({__name:"StartmenuOverlay",props:{isOpen:{type:Boolean,default:!1},parent:{type:HTMLDivElement}},emits:["close"],setup(d,{emit:B}){const m=d,b=x(),i=B,c=N(),k=P(),M=S(),$=H(),v=x(),g=T("contextMenu"),D=V(()=>[{label:$.t("create_shortcut_label"),command:()=>{c.addDesktopIcon(v.value),i("close")}}]),A=(s,e)=>{if(s.stopPropagation(),s.preventDefault(),!m.parent||!g.value||!c.apps.find(p=>p.id===e))return;const o=m.parent.getBoundingClientRect(),r={pageX:s.pageX-o.left,pageY:s.pageY-o.top,stopPropagation:()=>{},preventDefault:()=>{}};v.value=e,g.value.show(r)},O=s=>{c.open(s.id),i("close")},E=()=>{i("close"),M.close(!0)};F(b,()=>{i("close")},{ignore:["#start-menu-button"]});const f=s=>{i("close"),c.open("settings",{tab:s||void 0})};return(s,e)=>d.isOpen?(n(),a("div",{key:0,ref_key:"overlay",ref:b,class:"absolute bottom-16 left-0 flex h-96 overflow-hidden rounded-lg bg-gray-100/50 backdrop-blur-xl dark:bg-gray-800/50"},[t("div",j,[l(k).profilePicture?(n(),y(l(_),{key:1,image:l(k).profilePicture,onClick:e[1]||(e[1]=u(o=>f("profile"),["prevent"])),class:"hover:cursor-pointer"},null,8,["image"])):(n(),y(l(_),{key:0,icon:"pi pi-user",onClick:e[0]||(e[0]=u(o=>f("profile"),["prevent"])),class:"hover:cursor-pointer"})),t("div",q,[t("div",{onClick:e[2]||(e[2]=u(o=>f(),["prevent"])),class:"group relative rounded hover:bg-white/50 focus:outline-none active:bg-white/75 dark:hover:bg-black/25 dark:active:bg-black/50"},e[5]||(e[5]=[t("span",{class:"block p-2 transition duration-75 ease-linear active:scale-90"},[t("i",{class:"pi pi-cog"})],-1)])),t("div",{onClick:e[3]||(e[3]=u(o=>E(),["prevent"])),class:"group relative rounded hover:bg-white/50 focus:outline-none active:bg-white/75 dark:hover:bg-black/25 dark:active:bg-black/50"},e[6]||(e[6]=[t("span",{class:"block p-2 duration-75 active:scale-90"},[t("i",{class:"pi pi-sign-out"})],-1)]))])]),t("div",G,[t("div",J,[(n(!0),a(h,null,w(l(c).userApps,o=>(n(),a("div",K,[t("span",U,C(o.letter),1),(n(!0),a(h,null,w(o.data,r=>(n(),a("button",{type:"button",onClick:p=>O(r),onContextmenu:p=>A(p,r.id),class:"group relative flex items-center gap-2 rounded px-4 py-1 hover:bg-white/50 focus:outline-none active:bg-white/75 dark:hover:bg-black/25 dark:active:bg-black/50"},[r.icon?(n(),a("img",{key:0,class:"w-4",src:l(X)(r.icon),alt:r.name},null,8,Q)):(n(),a("i",W)),t("span",Z,C(r.name),1)],40,z))),256))]))),256))]),I(l(Y),{ref_key:"contextMenu",ref:g,model:D.value,"append-to":d.parent,onBeforeHide:e[4]||(e[4]=o=>v.value=void 0)},null,8,["model","append-to"])])],512)):R("",!0)}});export{ie as default};
